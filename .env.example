# ==============================================
# Environment Variables - PMP Platform (EXAMPLE)
# ==============================================
# ⚠️ COPY THIS FILE TO .env AND FILL WITH REAL VALUES
# DO NOT commit .env to version control!

# ==============================================
# DATABASE CREDENTIALS
# ==============================================
POSTGRES_DB=pmp_db
POSTGRES_USER=pmp_user
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_INITDB_ARGS=--encoding=UTF8 --locale=en_US.UTF-8
PGDATA=/var/lib/postgresql/data/pgdata

# ==============================================
# REDIS CREDENTIALS
# ==============================================
REDIS_PASSWORD=CHANGE_ME_STRONG_REDIS_PASSWORD

# ==============================================
# PGADMIN CREDENTIALS
# ==============================================
PGADMIN_DEFAULT_EMAIL=admin@pmp.local
PGADMIN_DEFAULT_PASSWORD=CHANGE_ME_PGADMIN_PASSWORD
PGADMIN_LISTEN_PORT=80

# ==============================================
# API GATEWAY - CRITICAL SECURITY SETTINGS
# ==============================================
NODE_ENV=development
# CRITICAL: Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_ME_GENERATE_STRONG_SECRET_MIN_32_CHARS
JWT_EXPIRES_IN=2h
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS Configuration (comma-separated origins for production)
# Example: CORS_ORIGIN=https://app.example.com,https://www.example.com
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# CTF AttackBox web terminal URL (student labs)
NEXT_PUBLIC_CTF_ATTACKBOX_URL=http://localhost:7681

# Service Authentication Token
SERVICE_AUTH_TOKEN=CHANGE_ME_SERVICE_TOKEN

# ==============================================
# MONITORING
# ==============================================
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD
GF_INSTALL_PLUGINS=redis-datasource
GF_SERVER_ROOT_URL=http://localhost:3002

# ==============================================
# SECURITY ALGORITHMS
# ==============================================
PIN_ENCRYPTION_ALGORITHM=3DES
MAC_ALGORITHM=HMAC-SHA256

# ==============================================
# FRAUD DETECTION THRESHOLDS
# ==============================================
FRAUD_THRESHOLD_LOW=30
FRAUD_THRESHOLD_MEDIUM=60
FRAUD_THRESHOLD_HIGH=80

# ==============================================
# KEY MANAGEMENT
# ==============================================
KEY_ROTATION_INTERVAL_DAYS=90
LMK_KEY_FILE=/app/keys/lmk.key
MASTER_KEY_FILE=/app/keys/master.key

# ==============================================
# LOGGING
# ==============================================
LOG_LEVEL=debug

# ==============================================
# CONSTRUCTED URLS (internal)
# ==============================================
# Service URLs (Localhost for development)
CARD_SERVICE_URL=http://localhost:8001
POS_SERVICE_URL=http://localhost:8002
ACQUIRER_SERVICE_URL=http://localhost:8003
NETWORK_SWITCH_URL=http://localhost:8004
ISSUER_SERVICE_URL=http://localhost:8005
AUTH_ENGINE_URL=http://localhost:8006
FRAUD_DETECTION_URL=http://localhost:8007
CRYPTO_SERVICE_URL=http://localhost:8010
HSM_SIMULATOR_URL=http://localhost:8011
KEY_MANAGEMENT_URL=http://localhost:8012

DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:5435/${POSTGRES_DB}
REDIS_URL=redis://:${REDIS_PASSWORD}@localhost:6379

# ==============================================
# HOW TO GENERATE STRONG SECRETS
# ==============================================
# JWT_SECRET: openssl rand -base64 64
# POSTGRES_PASSWORD: openssl rand -base64 32
# REDIS_PASSWORD: openssl rand -base64 32
# SERVICE_AUTH_TOKEN: openssl rand -hex 32
